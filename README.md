# ObjectOrientation
객체지향 정리
# 목록
0. 사설
1. 객체 지향의 정리
2. 실제 세계에서 보는 객체 간의 모습
3. 실제 코드
4. 구현 소스


## 0. 사설

오래 해보지 않았지만 개발자의 삶이란 새로운 프로그램(시스템)을 설계하고 구현하기 보단 
만들어져 있는 프로그램등에 대해서 매번 수정하고 변경하고 확장하는 일이 대다수를 차지한다고 느껴집니다.
(그러다 문득 내가 다람쥐 쳇바퀴와 같은 삶을 살고 있구나 하며 매너리즘에 빠져 많은 시간을 개발자가 아닌 코더처럼 살았습니다...)

이처럼 매번 수정하고 변경하고 기능을 확장하는 것은 생각보다 많은 리소스가 들어 갑니다.

기획자 혹은 클라이언트느님의 요구사항에 맞춰 시스템을 수정 했다고 가정했을 때 개발은 그것으로 끝나는 것이 아니라
기존 시스템 내 동작하는 다른 기능들에 대해서 영향력은 없는지 매번 검토를 해야하며, 
그 시스템이 거대할 수록.... 그리고 이미 운영 중인 시스템이라면 배포하는 입장에선 정말 귀찮고, 신경이 쓰이게 됩니다.

오버 하면 매 운영 배포시마다 피가 말리죠.

이러한 상황자체에 대해 단순 운영 배포 절차를 만들고 치밀하게 지켜나가면 어느정도 해결이 되겠지만,
그보다 이런 상황이 발생하는 근본적인 원인을 제거 하는 것이 보다 시간 및 노동력 리소스를 덜 먹는, 즉 훨씬 효율적이라고 생각이 들었습니다.

![image](https://user-images.githubusercontent.com/43172237/96360584-70f81480-1159-11eb-971e-4cd09b542e28.png)

그리고 그 근본적인 원인을 제거 하는 방법에 대해서 고민한 결과 그 끝에 있는 것이 바로 객체 지향이었습니다.

**객체 지향**
여러분. 말만 들어도 너무 설레지 않습니까? 
객체 지향에 대해 조금만 살펴보면 마치 금단의 마법과도 같았다고 생각했습니다.

- 시스템의 확장성을 용이하게 해주며,
- 아무리 거대한 시스템이더라도 손쉽게 구조를 파악할 수 있으며,
- 개발적인 측면에서 기능들을 쉽게 재사용할 수 있게 해준다.

정말 놀랍게도 객체 지향적 개발을 하면 이전에 경험한 문제점들이 모두 해소가 될거 같았습니다.
그런데 의아 했던건...

객체지향? 이거 대학교 전공 때 맨 처음 배웠던거 아닌가? 그럼 지금까지 개발은 객체 지향으로 개발하지 않았나?

라는 것이었죠.

소스 레벨에서 이야기 하면 제가 운영하고 있는 시스템은 충분히 객체지향적으로 클래스를 나누어 놨고, 공통 관심사에 대한
객체들을 모아 인터페이스 및 추상화를 시켰으며, 각 객체마다의 역할을 명확히 구분을 해놨다 라고 생각을 했었는데

그런데 왜 이런 문제가 발생하는지에 대해서 생각을 해보면 내가 객체지향을 잘못 이해하고 있었구나 라는 결론에 다다르게 되었습니다.

이에 "객체지향의 사실과 오해"(조영호 지음) 이란 서적을 읽으면서 여태 내가 오해했던 객체지향과 객체지향이 어떤 사실을 추구하는지에 대해서 정리를 해 보았습니다.



## 1. 객체 지향이란?

객체 지향. 말 그대로 객체를 지향 한다는 의미 입니다.

그렇다면 객체지향에서 얘기하는 객체가 무엇인지 그리고 객체가 가지는 특성에 대해서 우리는 이해할 필요가 있습니다.
객체 지향에서의 객체는 아래와 같이 명시하고 있습니다.

**객체**
- 하나의 개별적인 실체로 식별가능한 물리적인 또는 개념적인 사물

**객체의 특징**
- 객체 자신이 상태와 행위(행동)를 함께 가지고 있음
- 객체는 다른 객체와 협력이 가능
- 객체가 서로 협력 시 협력 내에 정해진 역할을 각 객체가 수행하며, 역할은 관련 된 책임의 집합.
- 객체는 서로 협력하기 위해 메시지를 이용하며, 각 객체는 자신이 보유한 메서드를 자율적으로 선택이 가능


**객체지향**
- 시스템을 상호작용하는**자율적인 객체**들의 공동체로 바라보고 객체를 이용해 시스템을 분할하는 방법

이렇게 얘기하면 두루뭉술하니 현실 세계의 예를 하나 들어보겠습니다.



## 2. 실제 세계에서 보는 객체 그리고 그 상호관계


프로 혼밥러인 나는 배가 고파 근처 김밥천국에 들어갔다.

들어가자 나를 반기는 고소한 참기름의 냄새. 
주변에 김밥을 말고 계신 아주머니, 
이미 식사를 하고 있는 손님, 
맹렬한 기운을 뿜는 불꽃을 이겨내며 장인정신의 손길로 음식을 조리하는 주방장.

그 모습은 언제나의 김밥천국이었기 때문에 나는 안심이 되었다. 
이후 난 내자신이 프로 혼밥러라는 것을 인지하곤 최대한 주변에 피해가 안가겠끔 구석 진 자리에 앉아 조용히 메뉴판을 바라보았다.

지갑에 있는 돈은 10,000원.

'흠... 올해 구충제를 안먹어서 그런지 느끼한게 땡기는군.'

나는 재빨리 손을 들어 점원에게 7,000원짜리 돈가스를 주문하며 선불로 계산을 했다. 
점원은 7,000원을 받은 후, 곧장 주방장에게 가 돈가스 주문을 인계 하였고, 주방장은 멋진 웍을 휘두르며 나를 위한 돈가스를 만들기 시작했다.

이후 시간은 흘러 주방장에서 나온 돈가스를 받은 점원은 나에게 돈가스를 내어주었고, 나는 그 영롱한 자태와 내음을 음미하며 서서히 그 기름진 덩어리를 가르기 시작했다.

생각보다 빨리 식사는 끝이났고, 밖을 나왔다. 

---


흔히 있는 일상 이야기를 장황하게 늘어 놓아보았습니다. 
(물론 돈가스 만드는데 웍을 사용하거나, 기생충이 있으면 느끼한게 땡긴다는 속설은 무시하셔도 좋습니다.)
이 장황한 이야기 속에서 객체와 각 객체간 어떤 상호작용을 하는지 정리를 해 보겠습니다.

### 요약
- 나(이하 손님)은 메뉴판을 보고 돈가스를 주문을 한다.
- 점원은 주문을 받고 주방장에게 주문을 전달한다.
- 주방장은 요리를 한 후 점원에게 돈가스를 내어준다.
- 점원은 전달 받은 돈가스를 나에게 준다.
- 손님은 맛있게 먹는다.

### 객체지향 관점의 요약

**객체**
- 손님
- 점원
- 주방장

**행동**
- 손님 : 메뉴판을 본다. 주문을 한다.
- 점원 : 요리를 지시한다.
- 주방장 : 요리를 한다.

**협력 관계** 
- **손님**은 **메뉴판**을 보고 메뉴를 정한다
- **손님**은 **점원**에게 주문한다.
- **점원**은 **주방장**에게 주문을 전달한다.
- 주방장은 주문을 요리한다.

이를 그림으로 요약하면 아래와 같습니다.

![image](https://user-images.githubusercontent.com/43172237/96360427-35107f80-1158-11eb-835c-4a5281205f71.png)


이제부터 위에 나열한 **객체, 행동, 협력관계** 에 대해서 객체 지향적으로 세분화 해 보겠습니다.


### 객체의 역할과 책임

각 객체는 그 의도에 맞는 **역할**을 가지고 있습니다.

손님은 메뉴판을 보고, 주문을 할 수 있으며, 
점원은 주문을 받고 주방장에게 요리를 지시할 수 있습니다.
주방장은 요리를 할 수 있고요.

우리가 이렇게 알 수 있는 이유는 무엇일까요?

이미 우리는 이미 그 객체를 정의하면서 그 역할을 맡겼기 때문입니다.

즉 객체 지향에서 객체를 **어떤 특정 역할을 맡길 수 있는 존재를 객체** 라고 정의할 수 있습니다.

그렇다면 역할을 맡김으로서 얻는 이점은 무엇일까요?

그것은 크게 두가지로 볼 수가 있습니다.
- 역할을 맡김으로 인해 가시적으로 그 객체가 원하는 대로 행동하길 바라기 때문이며,
- 그 역할을 이행함으로서 원하는 결과(=책임)를 얻을 수 있길 기대하기 때문 입니다.

마치 우리는 점원이 고객에게 주문하지 않고, 주방장이 손님에게 요리를 만들라고 지시 하지 않는 것을 알고 있는 것처럼 말입니다.


### 객체의 행동

각 객체는 역할을 맡음으로서 그 역할에 맞는 행동을 할 수 있습니다. 

손님은 주문이란 행동을 할 수 있으며, 점원은 주방장에게 요리를 지시하는 행동을 할 수 있고, 주방장은 요리라는 행동을 할 수 있는 것을
따로 설명하지 않아도 우리는 알수 있습니다.

하지만 점원이 손님의 주문 없이 주방장에게 요리를 시킬 수 없으며, 주방장 또한 점원의 지시 없이는 요리를 할 수 없습니다.

즉 객체는 **각 역할에 맞는 행동**을 취할 수 있고 **이 행동을 통해 각 객체간에 상호작용(=협력)을 할 수 있습니다.**


### 객체의 상태

위의 예시에서 주문 시 돈과 식자재 얘기를 하지 않았네요. 한번 해보겠습니다.

지갑에 10,000원이 있던 손님이 7,000원짜리 돈가스를 구입하고 나면 남은 금액은 3,000원이 남습니다.
점원 호주머니에 100,000이 있었다면 손님이 주문 후 107,000원이 있습니다.
주방장이 요리를 하고 나면 주방의 식자재가 줄어 듭니다.

위에 보시면 각 객체는 **행동(=각 객체간 상호작용)** 을 하고 나면 자신의 상태가 변경이 됩니다.

**상태**란 객체에 종속 된 그 **객체의 속성**을 의미 합니다.

주방장은 당연히 식자재 양에 대한 관리를 해야하며, 손님과 점원은 자신이 가지고 있는 돈에 대해서 관리가 필요 합니다.
이는 각각의 객체가 자신의 상태를 자신이 직접 관리함을 의미 합니다.

왜 객체 자신이 자신의 상태를 관리해야할까요?

그 이유는 상태는 행동에 의해서 결정되기 때문이며, 그 행동의 주체는 자기 자신이 되어야 하기 때문입니다.

손님이 주문을 하지 않았는데 지갑의 돈을 줄어들거나 늘어나진 않습니다. 오로지 손님이 주문(=결제)를 함으로서 자신이 가진 돈 이라는 상태에 변경이 일어납니다.
주방장 또한 마찬가지입니다. 요리를 시작해야 식자재 양이 줄어 들지, 아무런 행동이 없이 식자재에 양이 변경되진 않습니다.

즉 행동에 따라 그 상태가 변화하고 있습니다. 그리고 그 행동은 자기 자신에 종속이 되어 있고요

이를 어길 경우 어떠한 상황이 벌어질까요?

손님이 주문도 하지 않았는데 식자재의 양을 관리하고, 주방장이 멋대로 손님의 지갑의 돈을 빼간다면 우리는 그 객체들의 모습을 각각 손님과 주방장으로 정의할 수 있을까요?

이처럼 객체지향에서는 각 객체의 상태를 객체 자신이 관리하고 있으며 그 상태 또한 행동에 종속(=행동의 결과) 되어 있다고 볼 수 있습니다.


### 객체의 역할(책임), 행동, 상태, 그리고 객체간의 협력

우리는 김천에서 밥을 사 먹는 일련의 흐름을 객체지향 관점으로 나누어 보았습니다.

정리를 해보면 아래와 같습니다.

- 객체는 각 객체에 대해서 요구하는 역할이 존재한다.
- 객체는 각 행동을 통해 자신의 상태를 관리한다.
- 객체는 다른 객체와 행동을 통해 협력할 수 있다.


이는 곧 위에서 말한 **객체의 특징** 과 동일하다고 보실 수 있습니다.

- 객체 자신이 상태와 행위(행동)를 함께 가지고 있음
- 객체는 다른 객체와 협력이 가능
- 객체가 서로 협력 시 협력 내에 정해진 역할을 각 객체가 수행하며, 역할은 관련 된 책임의 집합.
- 객체는 서로 협력하기 위해 메시지를 이용하며, 각 객체는 자신이 보유한 메서드를 자율적으로 선택이 가능



## 3. 실제 코드

위의 내용을 한번 코드로 옮겨 봅시다.


1. 객체는 **"손님", "점원", "주방장"** 이 존재한다.
2. 각 객체의 역할은 아래와 같다.
- 손님 : 점원에게 주문을 한다
- 점원 : 주방장에게 요리 지시를 한다
- 주방장 : 요리를 한다
3. 각 객체의 상태는 아래와 같다.
- 손님 : 주문을 하기 위한 필요한 돈을 저장하는 지갑
- 점원 : 주문 완료 시 계산을 위해 돈을 저장할 지갑
- 주방장 : 요리를 하기 위한 식자재


![image](https://user-images.githubusercontent.com/43172237/96362558-1c5c9580-1169-11eb-8161-205021bf19c4.png)

(간략한 구조)


![image](https://user-images.githubusercontent.com/43172237/96362415-187c4380-1168-11eb-9684-affb7c881396.png)

(손님 객체인 "Client")


![image](https://user-images.githubusercontent.com/43172237/96362419-25009c00-1168-11eb-8b66-fdcb923b0d20.png)

(점원 객체인 "Server")


![image](https://user-images.githubusercontent.com/43172237/96362646-bae8f680-1169-11eb-8111-f8de61d6cc45.png)

(주방장 객체인 "Chef")


![image](https://user-images.githubusercontent.com/43172237/96362435-3cd82000-1168-11eb-8db2-859a2a3f37cb.png)

(메뉴 객체인 "Menu")




4. 구현 소스




